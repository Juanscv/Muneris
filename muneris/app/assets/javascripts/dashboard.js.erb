jQuery(document).ready(function () {
  if ($('.dashboard-map #map').length === 0)  return;

  var handler = Gmaps.build('Google');
  handler.buildMap({ internal: { id: 'map' } }, function () {
    var markers = handler.addMarkers(App.map.markers);

    _.each(App.map, function(json, index){
      var marker  = markers[index];
      json.marker = marker;
      google.maps.event.addListener(marker.getServiceObject(), 'click', function(){
        console.log(json);
        //whatever you need here
      });
    }); 

    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
    if (App.map.markers.length > 0) {
      handler.map.centerOn(App.map.markers[0]);
    }
  });
});
